{% extends 'base.html' %}
{% load static %}
{% block content %}

{% if not user.is_authenticated %}
<div class="container d-flex justify-content-center align-items-center min-vh-75 mt-5">
    <div class="card shadow-lg p-4" style="max-width: 400px; width: 100%;">
        <h2 class="text-center mb-4">üîí –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</h2>
        <div class="alert alert-warning text-center">
            <p>–í–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç, —á—Ç–æ–±—ã –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–æ–ª–∏–∫.</p>
            <a href="{% url 'register' %}" class="btn btn-warning mt-2">
                <i class="fas fa-user-plus me-2"></i> –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
            </a>
        </div>
    </div>
</div>

{% else %}
<!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
<h2 class="text-center my-4">–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–æ–ª–∏–∫–∞</h2>

<!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –∫–∞—Ä—É—Å–µ–ª—å—é –∏ —Ñ–æ—Ä–º–æ–π -->
<div class="row">
    <!-- –õ–µ–≤–∞—è —á–∞—Å—Ç—å - –∫–∞—Ä—É—Å–µ–ª—å -->
    <div class="col-md-6">
        <div id="carouselExample" class="carousel slide" data-bs-interval="false">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="{% static 'img/1-flour.jpg' %}" class="d-block w-100 rounded" alt="Slide 1">
                </div>
                <div class="carousel-item">
                    <img src="{% static 'img/2-flor.jpg' %}" class="d-block w-100 rounded" alt="Slide 2">
                </div>
                <div class="carousel-item">
                    <img src="{% static 'img/summer-terrace.jpg' %}" class="d-block w-100 rounded" alt="Slide 3">
                </div>
                <div class="carousel-item">
                    <img src="{% static 'img/veranda.jpg' %}" class="d-block w-100 rounded" alt="Slide 4">
                </div>
            </div>
            <!-- –ö–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –¥–ª—è –∫–∞—Ä—É—Å–µ–ª–∏ -->
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div>

    <!-- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å - —Ñ–æ—Ä–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <div class="col-md-6">
        <div class="card shadow-sm p-4">
            <h3 class="mb-4">–§–æ—Ä–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</h3>
            <form method="post">
                {% csrf_token %}
                <div class="mb-3">
                    <label for="{{ form.name.id_for_label }}" class="form-label">–ò–º—è</label>
                    {{ form.name }}
                </div>
                <div class="mb-3">
                    <label for="{{ form.choice_table.id_for_label }}" class="form-label">–ù–æ–º–µ—Ä —Å—Ç–æ–ª–∏–∫–∞</label>
                    {{ form.choice_table }}
                </div>
                <div class="mb-3">
                    <label for="{{ form.choice_event.id_for_label }}" class="form-label">–ü–æ–¥—ñ—è</label>
                    {{ form.choice_event }}
                </div>
                <div class="mb-3">
                    <label for="{{ form.date.id_for_label }}" class="form-label">–î–∞—Ç–∞</label>
                    {{ form.date }}
                </div>
                <div class="mb-3">
                    <label for="{{ form.time.id_for_label }}" class="form-label">–ß–∞—Å</label>
                    {{ form.time }}
                </div>
                <div class="mb-3">
                    <label for="{{ form.number_of_people.id_for_label }}" class="form-label">–ö—ñ–ª—å–∫—ñ—Å—Ç—å –ª—é–¥–µ–π</label>
                    <input type="number" id="id_number_of_people" name="number_of_people" class="form-control" min="1" max="12" required style="width: 80px;">
                </div>
                <!-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç) -->
                <div id="comment-section" class="mb-3 d-none">
                    <label for="{{ form.comment.id_for_label }}" class="form-label">–ö–æ–º–µ–Ω—Ç–∞—Ä</label>
                    {{ form.comment }}
                </div>
                <!-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º –∏ –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Ñ–æ—Ä–º—ã -->
                <div class="d-flex justify-content-between">
                    <button type="button" id="toggle-comment" class="btn btn-outline-secondary">–î–æ–¥–∞—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä</button>
                    {% if user.is_staff %}
                        <a href="{% url 'booking-list-for-choice' %}" class="btn btn-secondary">
                            –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–æ–ª–∏–∫–∏ –∏ —Å–æ–±—ã—Ç–∏—è
                        </a>
                    {% endif %}
                    <button type="submit" class="btn btn-primary">–ó–∞–±—Ä–æ–Ω—é–≤–∞—Ç–∏</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- JavaScript –¥–ª—è –ø–æ–∫–∞–∑–∞/—Å–∫—Ä—ã—Ç–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è -->
<script>
    const toggleCommentButton = document.getElementById('toggle-comment');
    const commentSection = document.getElementById('comment-section');

    toggleCommentButton.addEventListener('click', () => {
        if (commentSection.classList.contains('d-none')) {
            commentSection.classList.remove('d-none');
            toggleCommentButton.textContent = '–ü—Ä–∏—Ö–æ–≤–∞—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä';
        } else {
            commentSection.classList.add('d-none');
            toggleCommentButton.textContent = '–î–æ–¥–∞—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä';
        }
    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const numberInput = document.getElementById("id_number_of_people");

        numberInput.addEventListener("input", function () {
            let value = parseInt(this.value, 10);
            if (isNaN(value) || value < 1) {
                this.value = 1;
            } else if (value > 12) {
                this.value = 12;
            }
        });
    });
</script>
{% endif %}

{% endblock %}
